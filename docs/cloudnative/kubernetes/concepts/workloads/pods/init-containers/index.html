<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-cn" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.114.0">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Init 容器 | Website</title>
<meta name="description" content="本页提供了 Init 容器的概览：它是一种专用的容器，在 Pod 内的应用容器启动之前运行。Init 容器包括一些应用镜像中不存在的实用工具和安装脚本。
你可以在 Pod 的规格信息中与 containers 数组（应用容器的描述）同级的位置指定 Init 容器。
理解 Init 容器 Pod 可以包含多个容器，应用运行在这些容器里面，同时 Pod 也可以有一个或多个先于应用容器启动的 Init 容器。
Init 容器与普通容器完全一样，除了如下两点：
Init 容器始终会运行到完成状态。 每个 init 容器必须成功完成才能启动下一个容器。 如果 Pod 的 Init 容器失败，Kubernetes 会不断地重启该 Pod，直到 Init 容器成功为止。然而，如果 Pod 对应的 restartPolicy 值为 Never，它不会重新启动。
为 Pod 指定 Init 容器，需要在 Pod 的 spec 中添加 initContainers 字段， 该字段內以Container 类型对象数组的形式组织，和应用的 containers 数组同级相邻。 Init 容器的状态在 status.initContainerStatuses 字段中以容器状态数组的格式返回（类似 status.containerStatuses 字段）。
与普通容器的不同之处 Init 容器支持应用容器的全部字段和特性，包括资源限制、数据卷和安全设置。 然而，Init 容器对资源请求和限制的处理稍有不同，在下面 资源 处有说明。">
<meta property="og:title" content="Init 容器" />
<meta property="og:description" content="本页提供了 Init 容器的概览：它是一种专用的容器，在 Pod 内的应用容器启动之前运行。Init 容器包括一些应用镜像中不存在的实用工具和安装脚本。
你可以在 Pod 的规格信息中与 containers 数组（应用容器的描述）同级的位置指定 Init 容器。
理解 Init 容器 Pod 可以包含多个容器，应用运行在这些容器里面，同时 Pod 也可以有一个或多个先于应用容器启动的 Init 容器。
Init 容器与普通容器完全一样，除了如下两点：
Init 容器始终会运行到完成状态。 每个 init 容器必须成功完成才能启动下一个容器。 如果 Pod 的 Init 容器失败，Kubernetes 会不断地重启该 Pod，直到 Init 容器成功为止。然而，如果 Pod 对应的 restartPolicy 值为 Never，它不会重新启动。
为 Pod 指定 Init 容器，需要在 Pod 的 spec 中添加 initContainers 字段， 该字段內以Container 类型对象数组的形式组织，和应用的 containers 数组同级相邻。 Init 容器的状态在 status.initContainerStatuses 字段中以容器状态数组的格式返回（类似 status.containerStatuses 字段）。
与普通容器的不同之处 Init 容器支持应用容器的全部字段和特性，包括资源限制、数据卷和安全设置。 然而，Init 容器对资源请求和限制的处理稍有不同，在下面 资源 处有说明。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/cloudnative/kubernetes/concepts/workloads/pods/init-containers/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2020-07-23T16:43:26+08:00" />
<meta property="article:modified_time" content="2020-07-23T16:43:26+08:00" />
<meta itemprop="name" content="Init 容器">
<meta itemprop="description" content="本页提供了 Init 容器的概览：它是一种专用的容器，在 Pod 内的应用容器启动之前运行。Init 容器包括一些应用镜像中不存在的实用工具和安装脚本。
你可以在 Pod 的规格信息中与 containers 数组（应用容器的描述）同级的位置指定 Init 容器。
理解 Init 容器 Pod 可以包含多个容器，应用运行在这些容器里面，同时 Pod 也可以有一个或多个先于应用容器启动的 Init 容器。
Init 容器与普通容器完全一样，除了如下两点：
Init 容器始终会运行到完成状态。 每个 init 容器必须成功完成才能启动下一个容器。 如果 Pod 的 Init 容器失败，Kubernetes 会不断地重启该 Pod，直到 Init 容器成功为止。然而，如果 Pod 对应的 restartPolicy 值为 Never，它不会重新启动。
为 Pod 指定 Init 容器，需要在 Pod 的 spec 中添加 initContainers 字段， 该字段內以Container 类型对象数组的形式组织，和应用的 containers 数组同级相邻。 Init 容器的状态在 status.initContainerStatuses 字段中以容器状态数组的格式返回（类似 status.containerStatuses 字段）。
与普通容器的不同之处 Init 容器支持应用容器的全部字段和特性，包括资源限制、数据卷和安全设置。 然而，Init 容器对资源请求和限制的处理稍有不同，在下面 资源 处有说明。"><meta itemprop="datePublished" content="2020-07-23T16:43:26+08:00" />
<meta itemprop="dateModified" content="2020-07-23T16:43:26+08:00" />
<meta itemprop="wordCount" content="704">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Init 容器"/>
<meta name="twitter:description" content="本页提供了 Init 容器的概览：它是一种专用的容器，在 Pod 内的应用容器启动之前运行。Init 容器包括一些应用镜像中不存在的实用工具和安装脚本。
你可以在 Pod 的规格信息中与 containers 数组（应用容器的描述）同级的位置指定 Init 容器。
理解 Init 容器 Pod 可以包含多个容器，应用运行在这些容器里面，同时 Pod 也可以有一个或多个先于应用容器启动的 Init 容器。
Init 容器与普通容器完全一样，除了如下两点：
Init 容器始终会运行到完成状态。 每个 init 容器必须成功完成才能启动下一个容器。 如果 Pod 的 Init 容器失败，Kubernetes 会不断地重启该 Pod，直到 Init 容器成功为止。然而，如果 Pod 对应的 restartPolicy 值为 Never，它不会重新启动。
为 Pod 指定 Init 容器，需要在 Pod 的 spec 中添加 initContainers 字段， 该字段內以Container 类型对象数组的形式组织，和应用的 containers 数组同级相邻。 Init 容器的状态在 status.initContainerStatuses 字段中以容器状态数组的格式返回（类似 status.containerStatuses 字段）。
与普通容器的不同之处 Init 容器支持应用容器的全部字段和特性，包括资源限制、数据卷和安全设置。 然而，Init 容器对资源请求和限制的处理稍有不同，在下面 资源 处有说明。"/>




<link rel="preload" href="/scss/main.min.712fd4b6d85c1ea0f4f2839311f1f3fb3a5f8d3ec40be883bd3707526d96568d.css" as="style">
<link href="/scss/main.min.712fd4b6d85c1ea0f4f2839311f1f3fb3a5f8d3ec40be883bd3707526d96568d.css" rel="stylesheet" integrity="">

<script
  src="/js/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>
<script defer
  src="/js/lunr-2.3.9.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">Website</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/docs"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/blog"><span>Blogs</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about"><span>About</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search"
    aria-label="Search"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.e71dd357c21bf7fda1bcce7d0d43186d.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>

  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
  <script>
    $(function() {
    $("#td-section-nav a").removeClass("active");
    $("#td-section-nav #m-docscloudnativekubernetesconceptsworkloadspodsinit-containers").addClass("active"); 
    $("#td-section-nav #m-docscloudnativekubernetesconceptsworkloadspodsinit-containers-li span").addClass("td-sidebar-nav-active-item"); 
    $("#td-section-nav #m-docscloudnativekubernetesconceptsworkloadspodsinit-containers").parents("li").addClass("active-path"); 
    $("#td-section-nav li.active-path").addClass("show"); 
    $("#td-section-nav li.active-path").children("input").prop('checked', true);
    $("#td-section-nav #m-docscloudnativekubernetesconceptsworkloadspodsinit-containers-li").siblings("li").addClass("show");  
    $("#td-section-nav #m-docscloudnativekubernetesconceptsworkloadspodsinit-containers-li").children("ul").children("li").addClass("show");  
    $("#td-sidebar-menu").toggleClass("d-none"); 
    });
  </script>
  <div id="td-sidebar-menu" class="td-sidebar__inner d-none">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search"
    aria-label="Search"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.e71dd357c21bf7fda1bcce7d0d43186d.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docs-li">
  <a href="/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscloudnative-li">
  <input type="checkbox" id="m-docscloudnative-check"/>
  <label for="m-docscloudnative-check"><a href="/docs/cloudnative/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscloudnative"><span class="">CloudNative</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscloudnativekubernetes-li">
  <input type="checkbox" id="m-docscloudnativekubernetes-check"/>
  <label for="m-docscloudnativekubernetes-check"><a href="/docs/cloudnative/kubernetes/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscloudnativekubernetes"><span class="">Kubernetes 文档</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscloudnativekubernetesconcepts-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconcepts-check"/>
  <label for="m-docscloudnativekubernetesconcepts-check"><a href="/docs/cloudnative/kubernetes/concepts/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscloudnativekubernetesconcepts"><span class="">Concepts</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscloudnativekubernetesconceptsoverview-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsoverview-check"/>
  <label for="m-docscloudnativekubernetesconceptsoverview-check"><a href="/docs/cloudnative/kubernetes/concepts/overview/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscloudnativekubernetesconceptsoverview"><span class="">Overview</span></a></label>
  
  <ul class="ul-5 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptsoverviewkubenetes-components-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsoverviewkubenetes-components-check"/>
  <label for="m-docscloudnativekubernetesconceptsoverviewkubenetes-components-check"><a href="/docs/cloudnative/kubernetes/concepts/overview/kubenetes-components/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptsoverviewkubenetes-components"><span class="">Kubernetes Components</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptsoverviewwhat-is-kubernetes-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsoverviewwhat-is-kubernetes-check"/>
  <label for="m-docscloudnativekubernetesconceptsoverviewwhat-is-kubernetes-check"><a href="/docs/cloudnative/kubernetes/concepts/overview/what-is-kubernetes/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptsoverviewwhat-is-kubernetes"><span class="">What is Kubernetes?</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscloudnativekubernetesconceptscluster-architecture-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptscluster-architecture-check"/>
  <label for="m-docscloudnativekubernetesconceptscluster-architecture-check"><a href="/docs/cloudnative/kubernetes/concepts/cluster-architecture/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscloudnativekubernetesconceptscluster-architecture"><span class="">Cluster Architecture</span></a></label>
  
  <ul class="ul-5 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptscluster-architecturecontrollers-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptscluster-architecturecontrollers-check"/>
  <label for="m-docscloudnativekubernetesconceptscluster-architecturecontrollers-check"><a href="/docs/cloudnative/kubernetes/concepts/cluster-architecture/controllers/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptscluster-architecturecontrollers"><span class="">Controllers</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscloudnativekubernetesconceptsworkloads-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsworkloads-check"/>
  <label for="m-docscloudnativekubernetesconceptsworkloads-check"><a href="/docs/cloudnative/kubernetes/concepts/workloads/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscloudnativekubernetesconceptsworkloads"><span class="">Workloads</span></a></label>
  
  <ul class="ul-5 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscloudnativekubernetesconceptsworkloadspods-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsworkloadspods-check"/>
  <label for="m-docscloudnativekubernetesconceptsworkloadspods-check"><a href="/docs/cloudnative/kubernetes/concepts/workloads/pods/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscloudnativekubernetesconceptsworkloadspods"><span class="">Pods</span></a></label>
  
  <ul class="ul-6 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptsworkloadspodspod-overview-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsworkloadspodspod-overview-check"/>
  <label for="m-docscloudnativekubernetesconceptsworkloadspodspod-overview-check"><a href="/docs/cloudnative/kubernetes/concepts/workloads/pods/pod-overview/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptsworkloadspodspod-overview"><span class="">Pod Overview</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptsworkloadspodspods-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsworkloadspodspods-check"/>
  <label for="m-docscloudnativekubernetesconceptsworkloadspodspods-check"><a href="/docs/cloudnative/kubernetes/concepts/workloads/pods/pods/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptsworkloadspodspods"><span class="">Pods</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptsworkloadspodspod-lifecycle-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsworkloadspodspod-lifecycle-check"/>
  <label for="m-docscloudnativekubernetesconceptsworkloadspodspod-lifecycle-check"><a href="/docs/cloudnative/kubernetes/concepts/workloads/pods/pod-lifecycle/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptsworkloadspodspod-lifecycle"><span class="">Pod Lifecycle</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptsworkloadspodsinit-containers-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsworkloadspodsinit-containers-check"/>
  <label for="m-docscloudnativekubernetesconceptsworkloadspodsinit-containers-check"><a href="/docs/cloudnative/kubernetes/concepts/workloads/pods/init-containers/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptsworkloadspodsinit-containers"><span class="">Init 容器</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptsworkloadspodspod-preset-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsworkloadspodspod-preset-check"/>
  <label for="m-docscloudnativekubernetesconceptsworkloadspodspod-preset-check"><a href="/docs/cloudnative/kubernetes/concepts/workloads/pods/pod-preset/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptsworkloadspodspod-preset"><span class="">Pod Preset</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptsworkloadspodspod-topology-spread-constraints-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsworkloadspodspod-topology-spread-constraints-check"/>
  <label for="m-docscloudnativekubernetesconceptsworkloadspodspod-topology-spread-constraints-check"><a href="/docs/cloudnative/kubernetes/concepts/workloads/pods/pod-topology-spread-constraints/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptsworkloadspodspod-topology-spread-constraints"><span class="">Pod 拓扑扩展约束</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativekubernetesconceptsworkloadspodsdisruptions-li">
  <input type="checkbox" id="m-docscloudnativekubernetesconceptsworkloadspodsdisruptions-check"/>
  <label for="m-docscloudnativekubernetesconceptsworkloadspodsdisruptions-check"><a href="/docs/cloudnative/kubernetes/concepts/workloads/pods/disruptions/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativekubernetesconceptsworkloadspodsdisruptions"><span class="">干扰（Disruptions）</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscloudnativeenvoy-li">
  <input type="checkbox" id="m-docscloudnativeenvoy-check"/>
  <label for="m-docscloudnativeenvoy-check"><a href="/docs/cloudnative/envoy/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscloudnativeenvoy"><span class="">Envoy</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscloudnativeenvoyintroduction-li">
  <input type="checkbox" id="m-docscloudnativeenvoyintroduction-check"/>
  <label for="m-docscloudnativeenvoyintroduction-check"><a href="/docs/cloudnative/envoy/introduction/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscloudnativeenvoyintroduction"><span class="">Introduction</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscloudnativeenvoyintroductionwhat-is-envoy-li">
  <input type="checkbox" id="m-docscloudnativeenvoyintroductionwhat-is-envoy-check"/>
  <label for="m-docscloudnativeenvoyintroductionwhat-is-envoy-check"><a href="/docs/cloudnative/envoy/introduction/what-is-envoy/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscloudnativeenvoyintroductionwhat-is-envoy"><span class="">What is Envoy</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsmonitoring-li">
  <input type="checkbox" id="m-docsmonitoring-check"/>
  <label for="m-docsmonitoring-check"><a href="/docs/monitoring/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsmonitoring"><span class="">Monitoring</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsmonitoringprometheus-li">
  <input type="checkbox" id="m-docsmonitoringprometheus-check"/>
  <label for="m-docsmonitoringprometheus-check"><a href="/docs/monitoring/prometheus/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsmonitoringprometheus"><span class="">Prometheus</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsmonitoringprometheusintroduction-li">
  <input type="checkbox" id="m-docsmonitoringprometheusintroduction-check"/>
  <label for="m-docsmonitoringprometheusintroduction-check"><a href="/docs/monitoring/prometheus/introduction/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsmonitoringprometheusintroduction"><span class="">Introduction</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmonitoringprometheusintroductionoverview-li">
  <input type="checkbox" id="m-docsmonitoringprometheusintroductionoverview-check"/>
  <label for="m-docsmonitoringprometheusintroductionoverview-check"><a href="/docs/monitoring/prometheus/introduction/overview/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsmonitoringprometheusintroductionoverview"><span class="">Overview</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmonitoringprometheusintroductionfirst-steps-li">
  <input type="checkbox" id="m-docsmonitoringprometheusintroductionfirst-steps-check"/>
  <label for="m-docsmonitoringprometheusintroductionfirst-steps-check"><a href="/docs/monitoring/prometheus/introduction/first-steps/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsmonitoringprometheusintroductionfirst-steps"><span class="">First Steps</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmonitoringprometheusintroductioncomparison-to-alternatives-li">
  <input type="checkbox" id="m-docsmonitoringprometheusintroductioncomparison-to-alternatives-check"/>
  <label for="m-docsmonitoringprometheusintroductioncomparison-to-alternatives-check"><a href="/docs/monitoring/prometheus/introduction/comparison-to-alternatives/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsmonitoringprometheusintroductioncomparison-to-alternatives"><span class="">Comparison to Alternatives</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmonitoringprometheusintroductionfaq-li">
  <input type="checkbox" id="m-docsmonitoringprometheusintroductionfaq-check"/>
  <label for="m-docsmonitoringprometheusintroductionfaq-check"><a href="/docs/monitoring/prometheus/introduction/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsmonitoringprometheusintroductionfaq"><span class="">Frequently Asked Questions</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslogging-li">
  <input type="checkbox" id="m-docslogging-check"/>
  <label for="m-docslogging-check"><a href="/docs/logging/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docslogging"><span class="">Logging</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslogginglog-pilot-li">
  <input type="checkbox" id="m-docslogginglog-pilot-check"/>
  <label for="m-docslogginglog-pilot-check"><a href="/docs/logging/log-pilot/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docslogginglog-pilot"><span class="">Log Pilot</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscicd-li">
  <input type="checkbox" id="m-docscicd-check"/>
  <label for="m-docscicd-check"><a href="/docs/cicd/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscicd"><span class="">CI/CD</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscicdjenkins-li">
  <input type="checkbox" id="m-docscicdjenkins-check"/>
  <label for="m-docscicdjenkins-check"><a href="/docs/cicd/jenkins/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscicdjenkins"><span class="">Jenkins</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docscicdjenkinsuser-handbook-li">
  <input type="checkbox" id="m-docscicdjenkinsuser-handbook-check"/>
  <label for="m-docscicdjenkinsuser-handbook-check"><a href="/docs/cicd/jenkins/user-handbook/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docscicdjenkinsuser-handbook"><span class="">User Handbook</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscicdjenkinsuser-handbookinstalling-jenkins-li">
  <input type="checkbox" id="m-docscicdjenkinsuser-handbookinstalling-jenkins-check"/>
  <label for="m-docscicdjenkinsuser-handbookinstalling-jenkins-check"><a href="/docs/cicd/jenkins/user-handbook/installing-jenkins/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscicdjenkinsuser-handbookinstalling-jenkins"><span class="">Installing Jenkins</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscicdjenkinsuser-handbookoverview-li">
  <input type="checkbox" id="m-docscicdjenkinsuser-handbookoverview-check"/>
  <label for="m-docscicdjenkinsuser-handbookoverview-check"><a href="/docs/cicd/jenkins/user-handbook/overview/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docscicdjenkinsuser-handbookoverview"><span class="">User Handbook Overview</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdevelop-li">
  <input type="checkbox" id="m-docsdevelop-check"/>
  <label for="m-docsdevelop-check"><a href="/docs/develop/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsdevelop"><span class="">Develop</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevelopgo-li">
  <input type="checkbox" id="m-docsdevelopgo-check"/>
  <label for="m-docsdevelopgo-check"><a href="/docs/develop/go/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevelopgo"><span class="">Go</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdeveloper-tools-li">
  <input type="checkbox" id="m-docsdeveloper-tools-check"/>
  <label for="m-docsdeveloper-tools-check"><a href="/docs/developer-tools/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsdeveloper-tools"><span class="">Developer Tools</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdeveloper-toolshugo-li">
  <input type="checkbox" id="m-docsdeveloper-toolshugo-check"/>
  <label for="m-docsdeveloper-toolshugo-check"><a href="/docs/developer-tools/hugo/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsdeveloper-toolshugo"><span class="">Hugo</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdeveloper-toolshugoquick-start-li">
  <input type="checkbox" id="m-docsdeveloper-toolshugoquick-start-check"/>
  <label for="m-docsdeveloper-toolshugoquick-start-check"><a href="/docs/developer-tools/hugo/quick-start/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdeveloper-toolshugoquick-start"><span class="">Quick Start</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>


          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/luohu1/website/tree/main/content/zh-cn/docs/cloudnative/kubernetes/concepts/workloads/pods/init-containers.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> 查看页面源码</a>
  <a href="https://github.com/luohu1/website/edit/main/content/zh-cn/docs/cloudnative/kubernetes/concepts/workloads/pods/init-containers.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit on GitHub</a>
  <a href="https://github.com/luohu1/website/new/main/content/zh-cn/docs/cloudnative/kubernetes/concepts/workloads/pods/init-containers.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> 添加子页面</a>
  <a href="https://github.com/luohu1/website/issues/new?title=Init%20%e5%ae%b9%e5%99%a8" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Report issues</a>
  
</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#理解-init-容器">理解 Init 容器</a>
      <ul>
        <li><a href="#与普通容器的不同之处">与普通容器的不同之处</a></li>
      </ul>
    </li>
    <li><a href="#使用-init-容器">使用 Init 容器</a>
      <ul>
        <li><a href="#示例">示例</a></li>
        <li><a href="#使用-init-容器-1">使用 Init 容器</a></li>
      </ul>
    </li>
    <li><a href="#具体行为">具体行为</a>
      <ul>
        <li><a href="#资源">资源</a></li>
        <li><a href="#pod-重启的原因">Pod 重启的原因</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Documentation</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/cloudnative/">CloudNative</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/cloudnative/kubernetes/">Kubernetes 文档</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/cloudnative/kubernetes/concepts/">Concepts</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/cloudnative/kubernetes/concepts/workloads/">Workloads</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/cloudnative/kubernetes/concepts/workloads/pods/">Pods</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Init 容器</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Init 容器</h1>
	
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>
	<p>本页提供了 Init 容器的概览：它是一种专用的容器，在 <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/">Pod</a> 内的应用容器启动之前运行。Init 容器包括一些应用镜像中不存在的实用工具和安装脚本。</p>
<p>你可以在 Pod 的规格信息中与 <code>containers</code> 数组（应用容器的描述）同级的位置指定 Init 容器。</p>
<h2 id="理解-init-容器">理解 Init 容器</h2>
<p><a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/">Pod</a> 可以包含多个容器，应用运行在这些容器里面，同时 Pod 也可以有一个或多个先于应用容器启动的 Init 容器。</p>
<p>Init 容器与普通容器完全一样，除了如下两点：</p>
<ul>
<li>Init 容器始终会运行到完成状态。</li>
<li>每个 init 容器必须成功完成才能启动下一个容器。</li>
</ul>
<p>如果 Pod 的 Init 容器失败，Kubernetes 会不断地重启该 Pod，直到 Init 容器成功为止。然而，如果 Pod 对应的 <code>restartPolicy</code> 值为 Never，它不会重新启动。</p>
<p>为 Pod 指定 Init 容器，需要在 Pod 的 spec 中添加 <code>initContainers</code> 字段， 该字段內以<a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.18/#container-v1-core">Container</a> 类型对象数组的形式组织，和应用的 <code>containers</code> 数组同级相邻。 Init 容器的状态在 <code>status.initContainerStatuses</code> 字段中以容器状态数组的格式返回（类似 <code>status.containerStatuses</code> 字段）。</p>
<h3 id="与普通容器的不同之处">与普通容器的不同之处</h3>
<p>Init 容器支持应用容器的全部字段和特性，包括资源限制、数据卷和安全设置。 然而，Init 容器对资源请求和限制的处理稍有不同，在下面 <a href="https://kubernetes.io/zh/docs/concepts/workloads/pods/init-containers/#%E8%B5%84%E6%BA%90">资源</a> 处有说明。</p>
<p>同时 Init 容器不支持 <code>lifecycle</code>、 <code>livenessProbe</code>、<code>readinessProbe</code> 或 <code>startupProbe</code>，因为它们必须在 Pod 就绪之前运行完成。</p>
<p>如果为一个 Pod 指定了多个 Init 容器，kubelet 会按顺序逐个运行这些容器。每个 Init 容器必须运行成功，下一个才能够运行。当所有的 Init 容器运行完成时，Kubernetes 才会为 Pod 初始化应用容器并像平常一样运行。</p>
<h2 id="使用-init-容器">使用 Init 容器</h2>
<p>因为 Init 容器具有与应用容器分离的单独镜像，因此他们在启动相关代码方面具有一些优势：</p>
<ul>
<li>Init 容器可以包含一些安装过程中应用容器中不存在的实用工具或个性化代码。例如，没有必要仅为了在安装过程中使用类似 <code>sed</code>、 <code>awk</code>、 <code>python</code> 或 <code>dig</code> 这样的工具而去 <code>FROM</code> 一个镜像来生成一个新的镜像。</li>
<li>应用镜像的构建者和部署者可以各自独立工作，而没有必要联合构建一个单独的应用镜像。</li>
<li>Init 容器能以不同于Pod内应用容器的文件系统视图运行。因此，Init 容器可具有访问 <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Secrets</a> 的权限，而应用容器不能够访问。</li>
<li>由于 Init 容器必须在应用容器启动之前运行完成，因此 Init 容器提供了一种机制来阻塞或延迟应用容器的启动，直到满足了一组先决条件。一旦前置条件满足，Pod内的所有的应用容器会并行启动。</li>
<li>Init 容器可以安全地运行这些工具，避免这些工具导致应用镜像的安全性降低。通过将不必要的工具分开，您可以限制应用容器镜像的攻击面。</li>
</ul>
<h3 id="示例">示例</h3>
<p>下面是一些如何使用 Init 容器的想法：</p>
<ul>
<li>
<p>等待一个 <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Service</a> 完成创建，通过类似如下的单行 shell 命令：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span> i in <span style="color:#666">{</span>1..100<span style="color:#666">}</span>; <span style="color:#a2f;font-weight:bold">do</span> sleep 1; <span style="color:#a2f;font-weight:bold">if</span> dig myservice; <span style="color:#a2f;font-weight:bold">then</span> <span style="color:#a2f">exit</span> 0; <span style="color:#a2f;font-weight:bold">fi</span>; <span style="color:#a2f;font-weight:bold">done</span>; <span style="color:#a2f">exit</span> <span style="color:#666">1</span>
</span></span></code></pre></div></li>
<li>
<p>注册这个 Pod 到远程服务器，通过在命令中调用 API，类似如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST http://<span style="color:#b8860b">$MANAGEMENT_SERVICE_HOST</span>:<span style="color:#b8860b">$MANAGEMENT_SERVICE_PORT</span>/register -d <span style="color:#b44">&#39;instance=$(&lt;POD_NAME&gt;)&amp;ip=$(&lt;POD_IP&gt;)&#39;</span>
</span></span></code></pre></div></li>
<li>
<p>在启动应用容器之前等一段时间，使用类似命令：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sleep <span style="color:#666">60</span> 
</span></span></code></pre></div></li>
<li>
<p>克隆 Git 仓库到 <a href="https://kubernetes.io/docs/concepts/storage/volumes/">Volume</a>。</p>
</li>
<li>
<p>将配置值放到配置文件中，运行模板工具为主应用容器动态地生成配置文件。例如，在配置文件中存放 <code>POD_IP</code> 值，并使用 Jinja 生成主应用配置文件。</p>
</li>
</ul>
<h3 id="使用-init-容器-1">使用 Init 容器</h3>
<p>下面的例子定义了一个具有 2 个 Init 容器的简单 Pod。第一个等待 <code>myservice</code> 启动，第二个等待 <code>mydb</code> 启动。 一旦这两个 Init容器 都启动完成，Pod 将启动 <code>spec</code> 区域中的应用容器。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>Pod<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>myapp-pod<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">labels</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">app</span>:<span style="color:#bbb"> </span>myapp<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">spec</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">containers</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>myapp-container<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">image</span>:<span style="color:#bbb"> </span>busybox:1.28<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">command</span>:<span style="color:#bbb"> </span>[<span style="color:#b44">&#39;sh&#39;</span>,<span style="color:#bbb"> </span><span style="color:#b44">&#39;-c&#39;</span>,<span style="color:#bbb"> </span><span style="color:#b44">&#39;echo The app is running! &amp;&amp; sleep 3600&#39;</span>]<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">initContainers</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>init-myservice<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">image</span>:<span style="color:#bbb"> </span>busybox:1.28<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">command</span>:<span style="color:#bbb"> </span>[<span style="color:#b44">&#39;sh&#39;</span>,<span style="color:#bbb"> </span><span style="color:#b44">&#39;-c&#39;</span>,<span style="color:#bbb"> </span><span style="color:#b44">&#34;until nslookup myservice.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for myservice; sleep 2; done&#34;</span>]<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>init-mydb<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">image</span>:<span style="color:#bbb"> </span>busybox:1.28<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">command</span>:<span style="color:#bbb"> </span>[<span style="color:#b44">&#39;sh&#39;</span>,<span style="color:#bbb"> </span><span style="color:#b44">&#39;-c&#39;</span>,<span style="color:#bbb"> </span><span style="color:#b44">&#34;until nslookup mydb.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for mydb; sleep 2; done&#34;</span>]<span style="color:#bbb">
</span></span></span></code></pre></div><p>您可以通过运行以下命令启动此Pod：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl apply -f myapp.yaml
</span></span><span style="display:flex;"><span>pod/myapp-pod created
</span></span></code></pre></div><p>并使用以下命令检查其状态：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get -f myapp.yaml
</span></span><span style="display:flex;"><span>NAME        READY     STATUS     RESTARTS   AGE
</span></span><span style="display:flex;"><span>myapp-pod   0/1       Init:0/2   <span style="color:#666">0</span>          6m
</span></span></code></pre></div><p>或了解更多详情：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl describe -f myapp.yaml
</span></span><span style="display:flex;"><span>Name:          myapp-pod
</span></span><span style="display:flex;"><span>Namespace:     default
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>...<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>Labels:        <span style="color:#b8860b">app</span><span style="color:#666">=</span>myapp
</span></span><span style="display:flex;"><span>Status:        Pending
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>...<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>Init Containers:
</span></span><span style="display:flex;"><span>  init-myservice:
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>...<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>    State:         Running
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>...<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>  init-mydb:
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>...<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>    State:         Waiting
</span></span><span style="display:flex;"><span>      Reason:      PodInitializing
</span></span><span style="display:flex;"><span>    Ready:         False
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>...<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>Containers:
</span></span><span style="display:flex;"><span>  myapp-container:
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>...<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>    State:         Waiting
</span></span><span style="display:flex;"><span>      Reason:      PodInitializing
</span></span><span style="display:flex;"><span>    Ready:         False
</span></span><span style="display:flex;"><span><span style="color:#666">[</span>...<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>Events:
</span></span><span style="display:flex;"><span>  FirstSeen    LastSeen    Count    From                      SubObjectPath                           Type          Reason        Message
</span></span><span style="display:flex;"><span>  ---------    --------    -----    ----                      -------------                           --------      ------        -------
</span></span><span style="display:flex;"><span>  16s          16s         <span style="color:#666">1</span>        <span style="color:#666">{</span>default-scheduler <span style="color:#666">}</span>                                              Normal        Scheduled     Successfully assigned myapp-pod to 172.17.4.201
</span></span><span style="display:flex;"><span>  16s          16s         <span style="color:#666">1</span>        <span style="color:#666">{</span>kubelet 172.17.4.201<span style="color:#666">}</span>    spec.initContainers<span style="color:#666">{</span>init-myservice<span style="color:#666">}</span>     Normal        Pulling       pulling image <span style="color:#b44">&#34;busybox&#34;</span>
</span></span><span style="display:flex;"><span>  13s          13s         <span style="color:#666">1</span>        <span style="color:#666">{</span>kubelet 172.17.4.201<span style="color:#666">}</span>    spec.initContainers<span style="color:#666">{</span>init-myservice<span style="color:#666">}</span>     Normal        Pulled        Successfully pulled image <span style="color:#b44">&#34;busybox&#34;</span>
</span></span><span style="display:flex;"><span>  13s          13s         <span style="color:#666">1</span>        <span style="color:#666">{</span>kubelet 172.17.4.201<span style="color:#666">}</span>    spec.initContainers<span style="color:#666">{</span>init-myservice<span style="color:#666">}</span>     Normal        Created       Created container with docker id 5ced34a04634; Security:<span style="color:#666">[</span><span style="color:#b8860b">seccomp</span><span style="color:#666">=</span>unconfined<span style="color:#666">]</span>
</span></span><span style="display:flex;"><span>  13s          13s         <span style="color:#666">1</span>        <span style="color:#666">{</span>kubelet 172.17.4.201<span style="color:#666">}</span>    spec.initContainers<span style="color:#666">{</span>init-myservice<span style="color:#666">}</span>     Normal        Started       Started container with docker id 5ced34a04634
</span></span></code></pre></div><p>如需查看 Pod 内 Init 容器的日志，请执行:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl logs myapp-pod -c init-myservice <span style="color:#080;font-style:italic"># Inspect the first init container</span>
</span></span><span style="display:flex;"><span>$ kubectl logs myapp-pod -c init-mydb      <span style="color:#080;font-style:italic"># Inspect the second init container</span>
</span></span></code></pre></div><p>此时，Init 容器将会等待至发现名称为 <code>mydb</code> 和 <code>myservice</code> 的 Service。</p>
<p>如下为创建这些 Service 的配置文件：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#00f;font-weight:bold">---</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>Service<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>myservice<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">spec</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">ports</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>- <span style="color:#008000;font-weight:bold">protocol</span>:<span style="color:#bbb"> </span>TCP<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">port</span>:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">targetPort</span>:<span style="color:#bbb"> </span><span style="color:#666">9376</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#00f;font-weight:bold">---</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>Service<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>mydb<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">spec</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">ports</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>- <span style="color:#008000;font-weight:bold">protocol</span>:<span style="color:#bbb"> </span>TCP<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">port</span>:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">targetPort</span>:<span style="color:#bbb"> </span><span style="color:#666">9377</span><span style="color:#bbb">
</span></span></span></code></pre></div><p>创建 <code>mydb</code> 和 <code>myservice</code> service 的命令：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl create -f services.yaml
</span></span><span style="display:flex;"><span>service/myservice created
</span></span><span style="display:flex;"><span>service/mydb created
</span></span></code></pre></div><p>然后，您将能看到这些 Init 容器执行完毕，并且 <code>my-app</code> Pod 进入了 Running 状态：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl get -f myapp.yaml
</span></span><span style="display:flex;"><span>NAME        READY     STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>myapp-pod   1/1       Running   <span style="color:#666">0</span>          9m
</span></span></code></pre></div><p>这个简单的例子应该能为你创建自己的 Init 容器提供一些启发。 <a href="https://kubernetes.io/zh/docs/concepts/workloads/pods/init-containers/#what-s-next">What&rsquo;s next</a> 部分提供了更详细例子的链接。</p>
<h2 id="具体行为">具体行为</h2>
<p>在 Pod 启动过程中，kubelet 会延迟运行 Init 容器，直到网络和存储就绪为止。然后，kubelet 按照 Pod 规范中出现的顺序运行 Pod 的 Init 容器。</p>
<p>每个 Init 容器成功退出后才会启动下一个 Init容器。如果应为运行或退出时失败引发容器启动失败，它会根据 Pod 的 <code>restartPolicy</code> 策略进行重试。然而，如果 Pod 的 <code>restartPolicy</code> 设置为 Always，Init 容器失败时会使用 <code>restartPolicy</code> 的 OnFailure 策略。</p>
<p>在所有的 Init 容器没有成功之前，Pod 将不会变成  <code>Ready</code> 状态。Init 容器的端口将不会在 Service 中进行聚集。 正在初始化中的 Pod 处于 <code>Pending</code> 状态，但会将条件 <code>Initializing</code> 设置为 true。</p>
<p>如果 Pod <a href="https://kubernetes.io/zh/docs/concepts/workloads/pods/init-containers/#pod-restart-reasons">重启</a>，所有 Init 容器必须重新执行。</p>
<p>对 Init 容器 spec 的修改仅限于容器的 image 字段。更改 Init 容器的 image 字段，等同于重启该 Pod。</p>
<p>因为 Init 容器可能会被重启、重试或者重新执行，所以 Init 容器的代码应该是幂等的。 特别地，基于 <code>EmptyDirs</code> 写文件的代码，应该对输出文件可能已经存在做好准备。</p>
<p>Init 容器具有应用容器的所有字段。 然而 Kubernetes 禁止使用 <code>readinessProbe</code>，因为 Init 容器不能定义不同于完成（completion）的就绪（readiness）。 这一点会在校验时强制执行。</p>
<p>在 Pod 上使用 <code>activeDeadlineSeconds</code>和在容器上使用 <code>livenessProbe</code> 可以避免 Init 容器一直重复失败。 <code>activeDeadlineSeconds</code> 时间包含了 Init 容器启动的时间。</p>
<p>在 Pod 中的每个应用容器和 Init 容器的名称必须唯一；与任何其它容器共享同一个名称，会在校验时抛出错误。</p>
<h3 id="资源">资源</h3>
<p>给定 Init 容器的执行顺序下，资源使用适用于如下规则：</p>
<ul>
<li>所有 Init 容器上定义的对任何特定资源的 request 或 limit 的最大值，作为 <em>有效的初始 request/limit</em></li>
<li>Pod 对资源的有效 request/limit 是如下两者的较大者：
<ul>
<li>所有应用容器对某个资源的 request/limit 之和</li>
<li>对某个资源的有效初始 request/limit</li>
</ul>
</li>
<li>基于有效 limit/request 完成调度，这意味着 Init 容器能够为初始化过程预留资源，这些资源在 Pod 生命周期过程中并没有被使用。</li>
<li>Pod 的 <em>有效 QoS 层</em> ，与 Init 容器和应用容器的一样。</li>
</ul>
<p>配额和限制将根据有效的 Pod request 和 limit 进行应用。</p>
<p>Pod 级别的 cgroups 是基于有效 Pod 的 request 和 limit，和调度器相同。</p>
<h3 id="pod-重启的原因">Pod 重启的原因</h3>
<p>Pod 重启导致 Init 容器重新执行，主要有如下几个原因：</p>
<ul>
<li>用户更新 Pod 的 Spec 导致 Init 容器镜像发生改变。Init 容器镜像的变更会引起 Pod 重启. 应用容器镜像的变更仅会重启应用容器。</li>
<li>Pod 的基础设施容器（译者注：如 pause 容器）被重启。这种情况不多见，必须由具备Node root 权限访问的人员来完成。</li>
<li>当 <code>restartPolicy</code> 设置为 Always，Pod 中所有容器会终止而强制重启，由于垃圾收集导致 Init 容器的完成记录丢失。</li>
</ul>

	
	
	
</div>


          </main>
        </div>
      </div>
      
<footer class="row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-2 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list"
    aria-label="User mailing list">
    <a class="text-white" target="_blank" href="https://github.com/luohu1">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-2 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub"
    aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/luohu1">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-8 text-center order-sm-2">
        
        <small class="text-white">&copy; 2023 LH 保留所有权利</small>
        
        
        <br />
        <small class="ml-1"><a href="https://beian.miit.gov.cn" target="_blank">京ICP备16035985号</a></small>
        
      </div>
    </div>
  </div>
</footer>

    </div>
    
  <script src="/js/main.min.99abe30f7fb05785a480d405ee1665ebd520cec6bbadffe966b7737e103675b8.js" integrity="sha256-mavjD3&#43;wV4WkgNQF7hZl69Ugzsa7rf/pZrdzfhA2dbg=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js" integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>